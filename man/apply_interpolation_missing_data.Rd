% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/apply_interpolation_missing_data.R
\name{apply_interpolation_missing_data}
\alias{apply_interpolation_missing_data}
\title{Interpolate missing data within a maximum gap}
\usage{
apply_interpolation_missing_data(
  df,
  site_col = "site",
  parameter_col = "parameter",
  dt_col = "DT_round",
  value_col = "smoothed_mean",
  max_gap = 4,
  new_value_col = "mean_filled",
  method = "linear"
)
}
\arguments{
\item{df}{A data frame containing water quality measurements.}

\item{site_col}{Name of the column identifying the monitoring site. Defaults
to \code{"site"}.}

\item{parameter_col}{Name of the column identifying the measured parameter.
Defaults to \code{"parameter"}.}

\item{dt_col}{Name of the \code{POSIXct} datetime column used for temporal
ordering and equal-spacing validation. Defaults to \code{"DT_round"}.}

\item{value_col}{Name of the numeric column containing the values to
interpolate (may contain NAs). Defaults to \code{"smoothed_mean"}.}

\item{max_gap}{Maximum number of consecutive NA observations that will be
filled. Gaps longer than this are left as NA. Defaults to \code{4}.}

\item{new_value_col}{Name of the output column that will hold the
interpolated values. Defaults to \code{"mean_filled"}.}

\item{method}{Interpolation method to use. Must be one of:
\itemize{
\item \code{"linear"}: straight-line interpolation via \code{zoo::na.approx}.
\item \code{"spline"}: cubic spline interpolation via \code{zoo::na.spline}.
}

Defaults to \code{"linear"}.}
}
\value{
A data frame with the same structure as the input plus a new column
named \code{new_value_col} containing the interpolated values. Rows within gaps
exceeding \code{max_gap} retain \code{NA}. The data are sorted by \code{site_col},
\code{parameter_col}, and \code{dt_col}.
}
\description{
Fills NA values in a numeric column using linear or spline interpolation,
limited to gaps of at most \code{max_gap} consecutive missing observations. Rows
belonging to runs of NAs longer than \code{max_gap} are left as NA.

The function validates two preconditions before interpolating:
\itemize{
\item The datetime column must be of class \code{POSIXct}/\code{POSIXt}; an error is
thrown otherwise.
\item Within each site/parameter group the timestamps must be equally spaced; a
warning is issued when they are not, because unequal spacing can cause
\code{zoo::na.approx} and \code{zoo::na.spline} to produce misleading estimates.
Use \code{padr::pad()} to fill gaps before calling this function.
}

Interpolation is performed independently for every combination of
\code{site_col} and \code{parameter_col}, so a single call can process a data frame
that contains multiple sites and parameters simultaneously.
}
\examples{
# Examples are temporarily disabled
}
\seealso{
\code{\link[=low_pass_filter]{low_pass_filter()}}
}
