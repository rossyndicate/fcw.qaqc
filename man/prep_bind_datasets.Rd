% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prep_bind_datasets.R
\name{prep_bind_datasets}
\alias{prep_bind_datasets}
\title{Combine incoming and historical water quality monitoring data}
\usage{
prep_bind_datasets(
  incoming_data_list,
  historical_data_list,
  subset = FALSE,
  subset_period = NULL
)
}
\arguments{
\item{incoming_data_list}{A list of dataframes containing newly collected or
newly flagged water quality data. Each list element should be named with the
"site-parameter" naming convention (e.g., "riverbluffs-Temperature").}

\item{historical_data_list}{A list of dataframes containing previously processed
historical data. Each list element should follow the same "site-parameter" naming
convention as \code{incoming_data_list}.}

\item{subset}{Logical. If \code{TRUE}, trims historical data to the
\code{subset_period} window before combining (pre-flagging mode). If \code{FALSE},
replaces the \code{subset_period} overlap in the historical archive with incoming
data (archive write-back mode). Default is \code{FALSE}.}

\item{subset_period}{Character string specifying the time window used as the
overlap period. Required when \code{subset = TRUE}. Also replaces the hardcoded
24-hour overlap boundary in archive write-back mode. Accepts any duration string
compatible with \code{lubridate} (e.g., \code{"24 hours"}, \code{"12 hours"}).
Default is \code{NULL}.}
}
\value{
A named list of dataframes, one per site-parameter combination, containing
the merged data. All dataframes include a \code{historical} boolean column indicating
whether each record originates from the historical archive (\code{TRUE}) or is
newly incoming (\code{FALSE}).
}
\description{
Merges incoming water quality data with historical data for each site-parameter
combination. This function handles two distinct use cases controlled by the
\code{subset} argument:

\strong{Pre-flagging mode} (\code{subset = TRUE}): Trims historical data to the
most recent \code{subset_period} window and combines it with incoming data to
create a working list for the flagging pipeline. Historical records are tagged
\code{historical = TRUE} and incoming records are tagged \code{historical = FALSE}.
The \code{historical} column is used downstream by \code{prep_bind_datasets(..., subset = FALSE)}
to identify the overlap period and replace it with freshly flagged data.
Equivalent to the former \code{combine_datasets()}.

\strong{Archive write-back mode} (\code{subset = FALSE}): Merges newly flagged
data back into the long-term historical archive, replacing the \code{subset_period}
overlap window with updated flags from the most recent processing run. All output
records are tagged \code{historical = TRUE} since they are being written to the
archive. Equivalent to the former \code{final_data_binder()}.
}
\examples{
# Examples are temporarily disabled
}
\seealso{
\code{\link[=prep_incoming_HydroVu_data]{prep_incoming_HydroVu_data()}}

\code{\link[=prep_add_field_notes]{prep_add_field_notes()}}

\code{\link[=prep_summary_statistics]{prep_summary_statistics()}}
}
